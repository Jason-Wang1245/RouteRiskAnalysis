<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API Data Retrieval</title>
  </head>
  <body>
    <script>
      function fetchData() {
          var url = "https://donnees.montreal.ca/api/3/action/datastore_search";
          var resource_id = "05deae93-d9fc-4acb-9779-e0942b5e962f";
          var limit = 5;

          // Construct the API request URL
          var apiUrl = `${url}?resource_id=${resource_id}&limit=${limit}`;

          fetch(apiUrl, {
              method: "GET",
              mode: "cors",
              headers: {
                  "Content-Type": "application/json",
                  Accept: "application/json",
              },
          })
          .then((response) => response.json())
          .then((data) => {
              if (data.result && data.result.records) {
                  data.result.records.forEach((record) => {
                      // Access latitude and longitude properties and print them
                      var latitude = record.LOC_LAT;
                      var longitude = record.LOC_LONG;

                      console.log(`Latitude: ${latitude}, Longitude: ${longitude}`);
                  });
              } else {
                  console.error("Error: Unable to retrieve records.");
              }
          })
          .catch((error) => {
              console.error("Error fetching data:", error);
          });
      }

      fetchData();
    </script>
  </body>
</html>
